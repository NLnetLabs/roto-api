[package]
authors = ["The NLnet Labs RPKI team <rpki-team@nlnetlabs.nl>"]
categories = ["network-programming"]
description = "HTTP/JSON API that combines Prefix Allocation from the RIRs and BGP announcements"
edition = "2018"
homepage = "https://nlnetlabs.nl/projects/routing/rotonda/"
keywords = ["routing", "bgp"]
license = "BSD-3-Clause"
name = "roto-api"
repository = "https://github.com/NLnetLabs/roto-api/"
version = "0.2.0"

[dependencies]
ansi_term = "^0.12"
chrono = "0.4.19"
csv = "^1.1"
hyper = {version = "0.14.9", features = ["full"]}
num = "^0.3"
rotonda-store = "0.2.0"
rustyline = "8.0.0"
tokio = {version = "1.7.1", features = ["macros", "rt-multi-thread", "sync"]}

[package.metadata.deb]
section = "net"
priority = "optional"
assets = [
  ["target/release/api", "usr/bin/roto-api", "755"],
]
maintainer-scripts = "pkg/debian"
changelog = "target/debian/changelog" # this will be generated by the pkg workflow
copyright = "Copyright (c) 2022, NLnet Labs. All rights reserved."

[package.metadata.generate-rpm]
# Use a shorter description that that above otherwise the RPM package linter
# rpmlint fails with error "E: summary-too-long".
summary = "RIR/BGP Prefix Allocation combining HTTP server"
# "BSD" alone is the 3-clause license. Inheriting "license" from above causes rpmlint to
# complain with "invalid-license".
# See: https://fedoraproject.org/wiki/Licensing:Main?rd=Licensing
license = "BSD"
assets = [
  { source = "target/release/api", dest = "/usr/bin/roto-api", mode = "755" }
]
# These get set using cargo-generate-rpm --set-metadata at package build time.
#post_install_script = ...
#pre_uninstall_script = ...
#post_uninstall_script = ...

# ensure that the useradd and rsync tools are present by installing their respective packages
[package.metadata.generate-rpm.requires]
shadow-utils = "*"